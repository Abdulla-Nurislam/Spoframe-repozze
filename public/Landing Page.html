<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spoframe - Стильные рамки для вашего интерьера</title>
    <meta name="description" content="Spoframe - элегантные рамки с интеграцией Spotify для отображения обложек альбомов и плейлистов. Стильный дизайн для любого интерьера.">
    <meta name="keywords" content="Spoframe, рамки, интерьер, Spotify, дизайн, обложки альбомов">
    <meta name="author" content="Spoframe">
    <meta property="og:title" content="Spoframe - Стильные рамки для вашего интерьера">
    <meta property="og:description" content="Элегантные рамки с интеграцией Spotify для отображения обложек альбомов и плейлистов">
    <meta property="og:image" content="/images/SF.png">
    <meta property="og:url" content="http://spoframe.com">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="http://spoframe.com">
    <link rel="stylesheet" href="/susp.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;500;600&family=Space+Grotesk:wght@300;400;500&family=Inter:wght@200;300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/auth.css">
    
    <style>
        @keyframes gradientAnimation {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        .nav-links li {
            padding: 0;
        }
        
        .hero-slide {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .slide-1 { 
            background: linear-gradient(-45deg, 
                #9333EA, /* Возвращен фиолетовый цвет */
                #4C1D95, /* Темно-фиолетовый */
                #7C3AED, /* Средний фиолетовый */
                #4C1D95);
            background-size: 400% 400%;
            animation: gradientAnimation 6s ease infinite;
        }
        .slide-2 { background-image: url('/images/slide2.jpg'); }
        .slide-3 { background-image: url('/images/slide3.jpg'); }
        .slide-4 { background-image: url('/images/slide4.jpg'); }
        
        .forgot-password {
            display: inline-block;
            font-size: 0.85rem;
            color: #00A8FC; /* Цвет как у ссылки регистрации */
            text-decoration: none;
            margin-top: 0.3rem;
            transition: all 0.2s ease;
        }
        
        .icon-box.purple {
            background-color: #7C3AED; /* Возвращен фиолетовый цвет */
        }
        
        /* Стили для выпадающего меню пользователя */
        .user-dropdown {
            position: relative;
            display: inline-block;
            margin-left: auto;
        }
        
        .user-dropdown-btn {
            background-color: transparent;
            border: none;
            color: #F8FAFC;
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 10px 14px;
            border-radius: 6px;
            transition: all 0.3s ease;
            margin-left: auto;
        }
        
        .user-dropdown-btn:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        /* Add styles for the username text */
        #headerUserName {
            font-weight: 500;
            font-size: 15px;
            margin-right: 6px;
        }
        
        /* Add styles for the dropdown arrow */
        .user-dropdown-btn .fa-chevron-down {
            font-size: 12px;
            transition: transform 0.3s ease;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .user-dropdown-btn:hover .fa-chevron-down {
            transform: rotate(180deg);
            color: rgba(255, 255, 255, 0.9);
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7C3AED, #4C1D95);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            color: white;
            font-weight: 500;
            font-size: 16px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }
        
        .user-dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: #1E293B;
            min-width: 200px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
            z-index: 1000;
            border-radius: 10px;
            border: 1px solid #334155;
            margin-top: 8px;
            overflow: hidden;
            animation: fadeIn 0.2s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-dropdown-content a {
            color: #F8FAFC;
            padding: 14px 18px;
            text-decoration: none;
            display: block;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.2s ease;
            font-size: 14px;
            font-weight: 500;
        }
        
        .user-dropdown-content a:last-child {
            border-bottom: none;
        }
        
        .user-dropdown-content a:hover {
            background-color: rgba(124, 58, 237, 0.1);
            color: #7C3AED;
        }
        
        .dropdown-show {
            display: block;
        }
        
        /* Улучшение стилей кнопок навигации */
        .nav-right {
            display: flex;
            align-items: center;
        }
        
        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .login-btn, .register-btn, .profile-btn, .logout-btn {
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .login-btn:hover, .register-btn:hover, .profile-btn:hover, .logout-btn:hover {
            transform: translateY(-2px);
        }
        
        /* Стили для уведомлений */
        .simple-notification {
            position: fixed;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: #1E293B;
            color: #F8FAFC;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: top 0.3s ease;
            z-index: 1000;
            border-left: 4px solid #10B981;
            font-family: 'Inter', sans-serif;
        }
        
        .simple-notification.error {
            border-left-color: #EF4444;
        }
        
        .simple-notification.show {
            top: 20px;
        }
    </style>
    <!-- Новые скрипты аутентификации -->
    <script src="/js/auth.js" defer></script>
    <!-- Скрипт component-loader.js удален, так как он автоматически загружает модальное окно аутентификации -->
    <script src="/js/auth-service.js" defer></script>
    <!-- Скрипт auth-ui.js удален, так как он пытается инициализировать модальное окно аутентификации -->
</head>
<body>
    <!-- Навигация -->
    <nav class="navbar" role="navigation" aria-label="Основная навигация" style="max-width: 100%; overflow-x: hidden; box-sizing: border-box;">
        <div class="nav-left" style="display: flex; align-items: center;">
            <a href="/" style="display: flex; align-items: center;">
                <img src="/SF.png" alt="Spoframe" class="logo" style="max-height: 40px;">
            </a>

            <ul class="nav-links" style="display: flex; margin: 0 0 0 20px; padding: 0; list-style: none;">
                <li style="margin: 0 15px 0 0;"><a href="/" class="active" data-lang-ru="Главная" data-lang-en="Home">Главная</a></li>
                <li style="margin: 0 15px 0 0;"><a href="/Product Catalog.html" data-lang-ru="Каталог" data-lang-en="Catalog">Каталог</a></li>
                <li style="margin: 0 15px 0 0;"><a href="/Product Detail.html" data-lang-ru="Подробности" data-lang-en="Details">Подробности</a></li>
            </ul>
        </div>
            
        <div class="nav-right">
            <div class="auth-buttons">
                <a href="/login.html?mode=register" class="register-btn" data-lang-ru="Зарегистрироваться" data-lang-en="Register">Зарегистрироваться</a>
                <a href="/login.html?mode=login" class="login-btn" data-lang-ru="Войти" data-lang-en="Login">Войти</a>
                <a href="#" id="logoutBtn" class="logout-btn" style="display:none;" data-lang-ru="Выйти" data-lang-en="Logout">Выйти</a>
                <a href="/profile.html" id="profileBtn" class="profile-btn" style="display:none;" data-lang-ru="Профиль" data-lang-en="Profile">Профиль</a>
            </div>
        </div>
    </nav>

    <!-- Уведомление -->
    <div id="notification" class="simple-notification"></div>

    <!-- Главный баннер -->
    <header class="hero">
        <!-- Слайды -->
        <div class="hero-slide slide-1 active"></div>
        <div class="hero-slide slide-2"></div>
        <div class="hero-slide slide-3"></div>
        <div class="hero-slide slide-4"></div>

        <div class="hero-content">
            <div class="trailer-label" data-lang-ru="Рамки" data-lang-en="Frames">Frames</div>
            <h1>Spoframe</h1>
            <div class="hero-buttons">
                <a href="/Product Detail.html" id="orderNowBtn" class="btn-watch-now" data-lang-ru="ЗАКАЗАТЬ СЕЙЧАС" data-lang-en="ORDER NOW">ORDER NOW</a>
                <div class="trailer-navigation">
                    <span class="dot active" data-slide="1"></span>
                    <span class="dot" data-slide="2"></span>
                    <span class="dot" data-slide="3"></span>
                    <span class="dot" data-slide="4"></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Features Section -->
    <section class="features">
        <h2 class="section-title">Features</h2>
        <p class="section-subtitle">Discover the unique features of Spoframe</p>
        <div class="features-grid">
            <div class="feature-card">
                <div class="icon-box blue">
                    <i class="icon-design"></i>
                </div>
                <h3 data-lang="feature-design-title">Stylish Design</h3>
                <p class="category" data-lang="feature-design-category">Design</p>
                <p data-lang="feature-design-desc">Elegant frames that complement any interior, adding a touch of sophistication to your space.</p>
            </div>
            
            <div class="feature-card">
                <div class="icon-box green">
                    <i class="icon-spotify"></i>
                </div>
                <h3 data-lang="feature-spotify-title">Spotify Integration</h3>
                <p class="category" data-lang="feature-spotify-category">Integration</p>
                <p data-lang="feature-spotify-desc">Easily connect to Spotify to display album covers, playlists, and much more directly on your frame.</p>
            </div>
            
            <div class="feature-card">
                <div class="icon-box purple">
                    <i class="icon-customize"></i>
                </div>
                <h3 data-lang="feature-display-title">Display Customization</h3>
                <p class="category" data-lang="feature-display-category">Accessibility</p>
                <p data-lang="feature-display-desc">Available in slideshow and static image modes. Customize content sources, frame rate, and display brightness according to your preferences.</p>
            </div>
        </div>
    <button class="btn-explore-features" onclick="window.location.href='/About Product.html'">Learn More</button> 
    </section>

    <!-- Футер -->
    <footer>
        <div class="footer-content">
            <div class="quick-links">
                <a href="/Product Catalog.html" data-lang="footer-catalog">Catalog</a>
                <span>•</span>
                <a href="/Product Detail.html" data-lang="footer-details">Details</a>
                <span>•</span>
                <a href="/About Product.html" data-lang="footer-about">About Product</a>
            </div>
            <div class="language-selector">
                <select id="languageSelect" aria-label="Language Selection">
                    <option value="ru">RU</option>
                    <option value="en" selected>EN</option>
                </select>
            </div>
            <div class="copyright">
                2025 Spoframe
            </div>
        </div>
    </footer>
    
    <!-- Удалено модальное окно аутентификации -->
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Инициализация слайдера
        initSlider();
        
        // Проверка авторизации
        checkAuth();
        
        // Инициализация кнопок авторизации
        initializeAuthButtons();

        // Кнопки входа и регистрации теперь обрабатываются в функции initializeAuthButtons()
        
        // Все обработчики событий, связанные с модальным окном аутентификации, удалены
    });
    
    // Функция для инициализации слайдера
    function initSlider() {
        const slides = document.querySelectorAll('.hero-slide');
        const dots = document.querySelectorAll('.dot');
        
        if (slides.length === 0 || dots.length === 0) {
            console.log('Элементы слайдера не найдены');
            return;
        }
        
        let currentSlide = 0;
        let slideInterval;
        let isTransitioning = false;
        
        // Функция для переключения слайдов
        function switchSlide(slideIndex) {
            if (isTransitioning) return;
            isTransitioning = true;
            
            // Убираем активный класс с текущего слайда и точки
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            
            // Обновляем индекс текущего слайда
            currentSlide = slideIndex;
            
            // Добавляем активный класс новому слайду и точке
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
            
            // Сбрасываем флаг через время анимации
            setTimeout(() => {
                isTransitioning = false;
            }, 500);
        }
        
        // Запускаем автоматическое переключение
        function startSlideshow() {
            if (slideInterval) clearInterval(slideInterval);
            slideInterval = setInterval(() => {
                let nextIndex = (currentSlide + 1) % slides.length;
                switchSlide(nextIndex);
            }, 5000);
        }
        
        // Обработчики событий для точек навигации
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                switchSlide(index);
            });
        });
        
        // Запускаем слайдшоу
        startSlideshow();
    }
    
    // Функция проверки авторизации
    function checkAuth() {
        try {
            const currentUser = JSON.parse(localStorage.getItem('currentUser')) || JSON.parse(sessionStorage.getItem('currentUser'));
            
            if (currentUser && currentUser.isAuthenticated) {
                // Пользователь авторизован
                document.getElementById('guestButtons').style.display = 'none';
                document.getElementById('userDropdown').style.display = 'block';
                
                // Заполняем данные пользователя
                const displayName = currentUser.username || currentUser.email.split('@')[0];
                document.getElementById('headerUserName').textContent = displayName;
                document.getElementById('headerUserInitials').textContent = getInitials(displayName);
                
                // Инициализация выпадающего меню
                initUserDropdown();
                
                // Устанавливаем обработчик на кнопку выхода
                document.getElementById('logoutBtn').removeEventListener('click', handleLogout);
                document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            } else {
                // Пользователь не авторизован
                document.getElementById('guestButtons').style.display = 'flex';
                document.getElementById('userDropdown').style.display = 'none';
                
                // Добавляем обработчики событий для кнопок входа и регистрации
                const loginBtn = document.querySelector('.login-btn');
                const registerBtn = document.querySelector('.register-btn');
                
                if (loginBtn) {
                    loginBtn.removeEventListener('click', redirectToLogin);
                    loginBtn.addEventListener('click', redirectToLogin);
                }
                
                if (registerBtn) {
                    registerBtn.removeEventListener('click', redirectToRegister);
                    registerBtn.addEventListener('click', redirectToRegister);
                }
            }
        } catch (error) {
            console.error('Ошибка при проверке авторизации:', error);
        }
    }
    
    // Обработчик выхода из системы
    function handleLogout(e) {
        e.preventDefault();
        
        // Удаление данных пользователя
        localStorage.removeItem('currentUser');
        sessionStorage.removeItem('currentUser');
        
        // Показываем уведомление
        showSimpleNotification('Вы успешно вышли из системы');
        
        // Перезагрузка страницы через 1 секунду
        setTimeout(function() {
            location.reload();
        }, 1000);
    }
    
    // Функция для получения инициалов из имени
    function getInitials(name) {
        return name.split(' ').map(n => n[0]).join('').toUpperCase();
    }
    
    // Инициализация выпадающего меню пользователя
    function initUserDropdown() {
        const dropdownBtn = document.getElementById('userDropdownBtn');
        const dropdownContent = document.getElementById('userDropdownContent');
        
        if (!dropdownBtn || !dropdownContent) return;
        
        // Удаляем существующие обработчики, чтобы избежать дублирования
        dropdownBtn.removeEventListener('click', toggleDropdown);
        document.removeEventListener('click', closeDropdownOnClickOutside);
        
        // Добавляем обработчик на кнопку
        dropdownBtn.addEventListener('click', toggleDropdown);
        
        // Закрыть выпадающее меню при клике вне его
        document.addEventListener('click', closeDropdownOnClickOutside);
        
        function toggleDropdown(e) {
            e.preventDefault();
            e.stopPropagation();
            dropdownContent.classList.toggle('dropdown-show');
        }
        
        function closeDropdownOnClickOutside(e) {
            if (!dropdownBtn.contains(e.target) && !dropdownContent.contains(e.target)) {
                dropdownContent.classList.remove('dropdown-show');
            }
        }
    }
    
    // Проверка электронной почты
    function validateEmail(email) {
        const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(String(email).toLowerCase());
    }
    
    // Получение списка пользователей из localStorage
    function getUsersFromStorage() {
        return JSON.parse(localStorage.getItem('users') || '[]');
    }
    
    // Проверка существования пользователя по email
    function checkUserExists(email) {
        const users = getUsersFromStorage();
        return users.some(user => user.email.toLowerCase() === email.toLowerCase());
    }
    
    // Получение пользователя по email и паролю
    function getUserByCredentials(email, password) {
        const users = getUsersFromStorage();
        return users.find(user => 
            user.email.toLowerCase() === email.toLowerCase() && 
            user.password === password
        );
    }
    
    // Сохранение нового пользователя
    function saveNewUser(name, email, password) {
        const users = getUsersFromStorage();
        const newUser = {
            id: users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1,
            name: name,
            email: email,
            password: password,
            registrationDate: new Date().toISOString()
        };
        
        users.push(newUser);
        localStorage.setItem('users', JSON.stringify(users));
        return newUser;
    }
    
// Функция для перенаправления на страницу авторизации
function redirectToAuth(formType = 'login') {
    window.location.href = '/login.html?mode=' + formType;
}

// Функция для перенаправления на страницу входа
function redirectToLogin() {
    window.location.href = '/login.html?mode=login';
}

// Функция для перенаправления на страницу регистрации
function redirectToRegister() {
    window.location.href = '/login.html?mode=register';
}

// Инициализация кнопок авторизации
function initializeAuthButtons() {
    // Находим кнопки входа и регистрации
    const loginLinks = document.querySelectorAll('.login-btn');
    const registerLinks = document.querySelectorAll('.register-btn');
    
    // Добавляем обработчики событий для кнопок входа
    loginLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = '/login.html?mode=login';
        });
    });
    
    // Добавляем обработчики событий для кнопок регистрации
    registerLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = '/login.html?mode=register';
        });
    });
}

// Дополнительные функции для работы с авторизацией могут быть добавлены здесь
